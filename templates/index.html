<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>액티브 ETF 모니터링</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div id="loading-overlay">
        <div class="spinner"></div>
        <p id="loading-text">데이터를 불러오는 중입니다...</p>
    </div>

    <div class="container">
        <header>
            <h1>액티브 ETF 포트폴리오 모니터링</h1>
            <div class="header-controls">
                <button id="view-toggle" class="btn btn-secondary">통계 보기</button>
                <a href="/settings" class="btn btn-secondary">설정</a>
                <button id="refresh-btn" class="btn">새로고침</button>
            </div>
        </header>

        <main class="content-grid">
            <aside class="etf-list-panel">
                <h2>ETF 목록</h2>
                <input type="text" id="etf-search" placeholder="ETF 검색...">
                <ul id="etf-list">
                    <!-- ETF 목록이 여기에 동적으로 추가됩니다. -->
                </ul>
            </aside>

            <section class="details-panel">
                <div id="welcome-message">
                    <h2>ETF를 선택해주세요</h2>
                    <p>왼쪽 목록에서 분석할 ETF를 선택하면 구성 종목 정보가 표시됩니다.</p>
                    <p>또는 <strong>통계 보기</strong> 버튼을 클릭하여 전체 통계를 확인하세요.</p>
                </div>

                <div id="etf-details" class="hidden">
                    <div class="details-header">
                        <div>
                            <h2 id="etf-name"></h2>
                            <p id="etf-ticker" class="ticker-info"></p>
                            <p id="etf-dates" class="date-info"></p>
                        </div>
                        <div class="details-controls">
                            <label for="holdings-count">표시 개수:</label>
                            <select id="holdings-count">
                                <option value="5">5개</option>
                                <option value="10" selected>10개</option>
                                <option value="15">15개</option>
                                <option value="all">전체</option>
                            </select>
                            <button id="export-csv-btn" class="btn btn-secondary">CSV 내보내기</button>
                        </div>
                    </div>
                    
                    <div class="table-container">
                        <table id="holdings-table">
                            <thead>
                                <tr>
                                    <th>순위</th>
                                    <th>종목명</th>
                                    <th>이전 비중(%)</th>
                                    <th>현재 비중(%)</th>
                                    <th>증감(%)</th>
                                    <th>평가금액</th>
                                    <th>상태</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- 구성 종목 정보가 여기에 동적으로 추가됩니다. -->
                            </tbody>
                        </table>
                    </div>
                    
                    <div id="chart-container" class="hidden">
                        <h3>비중 추이 (<span id="stock-name-chart"></span>)</h3>
                        <canvas id="weight-chart"></canvas>
                    </div>
                </div>

                <div id="stats-view" class="hidden">
                    <div class="details-header">
                        <div>
                            <h2>종목 통계</h2>
                            <p id="stats-date" class="date-info"></p>
                        </div>
                        <div class="details-controls">
                            <label for="stats-type">통계 유형:</label>
                            <select id="stats-type">
                                <option value="duplicate">중복 종목 순위</option>
                                <option value="amount">금액 순위</option>
                            </select>
                            <label for="theme-select">테마:</label>
                            <select id="theme-select">
                                <option value="">전체</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="table-container">
                        <table id="stats-table">
                            <thead>
                                <tr>
                                    <th>순위</th>
                                    <th>종목명</th>
                                    <th>종목코드</th>
                                    <th>중복 ETF 수</th>
                                    <th>총 평가금액</th>
                                    <th>평균 비중(%)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- 통계 데이터가 여기에 동적으로 추가됩니다. -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>